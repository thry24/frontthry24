<ion-content class="citas-page">
  <!-- Mostrar filtros y tabla solo si hay citas -->
  <div *ngIf="citasFiltradas().length > 0; else sinCitas">
    <div class="filtros-container">
      <ion-grid>
        <ion-row>
          <ion-col size="4">
            <ion-item>
              <ion-label position="floating">DÃ­a</ion-label>
              <ion-select [(ngModel)]="filtroDia" interface="popover">
                <ion-select-option *ngFor="let d of dias" [value]="d">{{ d }}</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>
          <ion-col size="4">
            <ion-item>
              <ion-label position="floating">Mes</ion-label>
              <ion-select [(ngModel)]="filtroMes" interface="popover">
                <ion-select-option *ngFor="let m of meses" [value]="m.value">{{ m.nombre }}</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>
          <ion-col size="4">
            <ion-item>
              <ion-label position="floating">AÃ±o</ion-label>
              <ion-select [(ngModel)]="filtroAnio" interface="popover">
                <ion-select-option *ngFor="let a of anios" [value]="a">{{ a }}</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row class="ion-justify-content-center">
          <ion-button color="medium" fill="outline" (click)="limpiarFiltros()">
            Limpiar Filtros
          </ion-button>
        </ion-row>
      </ion-grid>
    </div>

    <div class="citas-container">
      <table class="citas-table">
        <thead>
          <tr>
            <th>Cliente</th>
            <th>Propiedad</th>
            <th>Tipo operaciÃ³n</th>
            <th>Tipo cliente</th>
            <th>Evento</th>
            <th>Fecha</th>
            <th>Hora</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let cita of citasFiltradas()">
            <td>{{ cita.clienteNombre }}</td>
            <td class="prop-col">
              <img *ngIf="cita.propiedadImagen"
                  [src]="cita.propiedadImagen"
                  class="prop-img" />
              <span class="prop-clave">{{ cita.propiedadClave }}</span>
            </td>
            <td>{{ cita.tipoOperacion }}</td>
            <td>{{ cita.tipoCliente }}</td>
            <td>{{ cita.tipoEvento }}</td>
            <td>{{ cita.fecha | date: 'dd-MM-yyyy' }}</td>
            <td>{{ cita.hora }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Cuando no hay citas -->
  <ng-template #sinCitas>
    <div class="no-citas">
      <ion-icon name="calendar-clear-outline" class="icono"></ion-icon>
      <h2>No hay citas programadas</h2>
      <p>RelÃ¡jate ðŸ˜Œ â€” no hay nada pendiente por ahora.</p>
    </div>
  </ng-template>
</ion-content>
